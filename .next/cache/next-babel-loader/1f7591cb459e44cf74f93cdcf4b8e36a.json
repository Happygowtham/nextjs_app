{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport useSWR from 'swr';\nimport Link from 'next/link';\nimport cookie from 'js-cookie';\n\nfunction Home() {\n  var _useSWR = useSWR('/api/me', /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(args) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(args);\n\n            case 2:\n              res = _context.sent;\n              return _context.abrupt(\"return\", res.json());\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }()),\n      data = _useSWR.data,\n      revalidate = _useSWR.revalidate;\n\n  if (!data) return __jsx(\"h1\", null, \"Loading...\");\n  var loggedIn = false;\n\n  if (data.email) {\n    loggedIn = true;\n  }\n\n  return __jsx(\"div\", null, __jsx(Head, null, __jsx(\"title\", null, \"Home page\"), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"initial-scale=1.0, width=device-width\"\n  })), __jsx(\"h1\", null, \"Simplest login\"), loggedIn && __jsx(React.Fragment, null, __jsx(\"p\", null, \"Welcome \", data.email, \" :)\"), __jsx(\"br\", null), __jsx(\"button\", {\n    onClick: function onClick() {\n      cookie.remove('token');\n      revalidate();\n    }\n  }, \"Logout\")), !loggedIn && __jsx(React.Fragment, null, __jsx(\"h2\", null, \"Register yourself and login to get our updates\"), __jsx(\"div\", {\n    align: \"right\"\n  }, __jsx(Link, {\n    href: \"/login\"\n  }, \"Login\"), \" | \", __jsx(Link, {\n    href: \"/signup\"\n  }, \"Sign Up\"))));\n}\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}