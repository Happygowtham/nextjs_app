{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Router from 'next/router';\nimport cookie from 'js-cookie';\n\nvar Signup = function Signup() {\n  var _useState = useState(''),\n      signupError = _useState[0],\n      setSignupError = _useState[1];\n\n  var _useState2 = useState(''),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      password = _useState3[0],\n      setPassword = _useState3[1]; //const [passwordConfirmation, setPasswordConfirmation] = useState('');\n\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetch('/api/users', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (data) {\n      if (data && data.error) {\n        setSignupError(data.message);\n      }\n\n      if (data && data.token) {\n        //set cookie\n        cookie.set('token', data.token, {\n          expires: 2\n        });\n        Router.push('/');\n      }\n    });\n  }\n\n  return __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(\"p\", null, __jsx(\"b\", null, \"Sign Up\")), __jsx(\"label\", {\n    htmlFor: \"email\"\n  }, \"Email\", __jsx(\"input\", {\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    name: \"email\",\n    type: \"email\",\n    required: \"true\"\n  })), __jsx(\"br\", null), __jsx(\"label\", {\n    \"for\": \"password\"\n  }, \"Password\", __jsx(\"input\", {\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    name: \"password\",\n    type: \"password\",\n    required: \"true\"\n  })), __jsx(\"br\", null), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"Signup\"\n  }), signupError && __jsx(\"p\", {\n    style: {\n      color: 'red'\n    }\n  }, signupError));\n};\n\nexport default Signup;","map":null,"metadata":{},"sourceType":"module"}